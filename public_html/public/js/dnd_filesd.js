function previewfile(e){if(tests.filereader===!0&&acceptedTypes[e.type]===!0){var t=new FileReader;t.onload=function(t){var a=new Image;a.src=t.target.result,a.width=250,holder.appendChild(a),holder.innerHTML+="<p>Uploaded "+e.name+" "},t.readAsDataURL(e)}}function readfiles(e){for(var t=0;t<e.length;t++){var a=tests.formdata?new FormData:null;if(tests.formdata&&a.append("userfile",e[t]),tests.formdata){var d=new XMLHttpRequest;d.open("POST","http://wasdreviews.cs.ut.ee/index.php/games/do_upload",!0),d.send(a),d.onreadystatechange=function(){d.readyState==XMLHttpRequest.DONE&&(screenshots_field.value=screenshots_field.value+d.responseText+"|")}}previewfile(e[t])}}var holder=document.getElementById("holder"),tests={filereader:"undefined"!=typeof FileReader,dnd:"draggable"in document.createElement("span"),formdata:!!window.FormData},support={filereader:document.getElementById("filereader"),formdata:document.getElementById("formdata")},acceptedTypes={"image/png":!0,"image/jpeg":!0,"image/gif":!0},fileupload=document.getElementById("upload"),screenshots_field=document.getElementById("screenshots");"filereader formdata".split(" ").forEach(function(e){tests[e]===!1?support[e].className="fail":support[e].className="hidden"}),tests.dnd?(holder.ondragover=function(){return this.className="hover",!1},holder.ondragend=function(){return this.className="",!1},holder.ondrop=function(e){this.className="",e.preventDefault(),readfiles(e.dataTransfer.files)}):(fileupload.className="hidden",fileupload.querySelector("input").onchange=function(){readfiles(this.files)});