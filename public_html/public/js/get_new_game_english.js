function buildHTML(e){for(var a=(window.location.origin,0);a<e.length;a++){var t=document.createElement("A");t.id="gamelink",t.href="http://wasdreviews.cs.ut.ee/index.php/games/"+e[a][3],t.target="_blank";var n=document.createElement("div");n.id="container",n.className="gameContainer";var s=document.createElement("div");s.id="titleid",s.className="gameTitle",s.innerHTML=e[a][0];var i=document.createElement("div");i.id="gamedesc",i.className="gameDescription",i.innerHTML=e[a][1];var r=document.createElement("div");r.id="avgrating",r.className="gameRating",r.innerHTML="Rating: "+e[a][2];var d=document.createElement("IMG");d.className="gameImage",d.alt=e[a][0]+" screenshot",d.src="http://wasdreviews.cs.ut.ee/public/images/"+e[a][3]+"/"+e[a][4];var c=document.createElement("BR");n.appendChild(d),n.appendChild(s),n.appendChild(c),n.appendChild(i),n.appendChild(r),t.appendChild(n),$(".mainContainer").prepend(t)}}var prevMessage="";if("undefined"!=typeof EventSource){var source=new EventSource("http://wasdreviews.cs.ut.ee/index.php/games/get_new_game_event");source.onmessage=function(e){if(""==prevMessage)prevMessage=e.data;else if(prevMessage!=e.data){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=JSON.parse(a.responseText);buildHTML(e)}},a.open("GET","http://wasdreviews.cs.ut.ee/index.php/games/get_newest_game/"+prevMessage,!0),a.send(),prevMessage=e.data}}}