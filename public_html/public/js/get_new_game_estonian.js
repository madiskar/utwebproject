function buildHTML(e){for(var a=(window.location.origin,0);a<e.length;a++){var n=document.createElement("A");n.id="gamelink",n.href="http://wasdreviews.cs.ut.ee/index.php/games/"+e[a][3],n.target="_blank";var t=document.createElement("div");t.id="container",t.className="gameContainer";var i=document.createElement("div");i.id="titleid",i.className="gameTitle",i.innerHTML=e[a][0];var s=document.createElement("div");s.id="gamedesc",s.className="gameDescription",s.innerHTML=e[a][1];var r=document.createElement("div");r.id="avgrating",r.className="gameRating",r.innerHTML="Hinnang: "+e[a][2];var d=document.createElement("IMG");d.className="gameImage",d.alt=e[a][0]+" ekraanipilt",d.src="http://wasdreviews.cs.ut.ee/public/images/"+e[a][3]+"/"+e[a][4];var p=document.createElement("BR");t.appendChild(d),t.appendChild(i),t.appendChild(p),t.appendChild(s),t.appendChild(r),n.appendChild(t),$(".mainContainer").prepend(n)}}var prevMessage="";if("undefined"!=typeof EventSource){var source=new EventSource("http://wasdreviews.cs.ut.ee/index.php/games/get_new_game_event");source.onmessage=function(e){if(""==prevMessage)prevMessage=e.data;else if(prevMessage!=e.data){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=JSON.parse(a.responseText);buildHTML(e)}},a.open("GET","http://wasdreviews.cs.ut.ee/index.php/games/get_newest_game/"+prevMessage,!0),a.send(),prevMessage=e.data}}}